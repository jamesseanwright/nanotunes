(function(e){function b(a,c,d){this.a=d||new (e.AudioContext||webkitAudioContext);this.u=a;this.v=c;this.b=[]}var h=/^([A-Z]{3})/,k=/([A-GX]#?)([1-8])([1-9]{1,2})/g,l=new Map([["C",16.35],["C#",17.32],["D",18.35],["D#",19.45],["E",20.6],["F",21.83],["F#",23.12],["G",24.5],["G#",25.96],["A",27.5],["A#",29.14],["B",30.87],["X",0]]);b.prototype.play=function(a){this.stop();a=this.v[a];for(var c=Array(a.parts.length),d=0;d<a.parts.length;d++){var b=this.u[this.o(a.parts[d])],f=this.m(a.parts[d],a.bpm);
c[d]=this.j(b);this.f(c[d],f,a.isLooping)}this.b=c};b.prototype.stop=function(){for(var a=0;a<this.b.length;a++)this.b[a].stop()};b.prototype.o=function(a){return a.match(h)[1]};b.prototype.m=function(a,c){for(var d=[],b;b=k.exec(a);)d.push({length:this.l(b[3],c),s:this.i(b[1],b[2])});return d};b.prototype.l=function(a,c){return parseInt(a)/(c/60)/4};b.prototype.i=function(a,c){return l.get(a)*Math.pow(1.059463094359,12*c)};b.prototype.j=function(a){var c=this.a.createOscillator();c.type=a.wave;c.frequency.value=
0;var d=this.g(c,a.gain),d=this.h(d,a.pan);d.connect(this.a.destination);c.start();return c};b.prototype.f=function(a,c,d){for(var b=this,f=0,g=0;g<c.length;g++){var e=c[g];a.frequency.setValueAtTime(c[g].s,this.a.currentTime+f);f+=e.length}setTimeout(function(){d?b.f(a,c,d):(b.stop(),b.onStop&&b.onStop())},1E3*Math.round(f))};b.prototype.g=function(a,c){return this.c(a,c,"createGain","gain")};b.prototype.h=function(a,c){return this.c(a,c,"createStereoPanner","pan")};b.prototype.c=function(a,c,b,
e){if(!c||!this.a[b])return a;b=this.a[b]();b[e].value=c;a.connect(b);return b};e.NT=b;"undefined"!==typeof module&&(module.w=b)})("undefined"!==typeof global?global:window);
